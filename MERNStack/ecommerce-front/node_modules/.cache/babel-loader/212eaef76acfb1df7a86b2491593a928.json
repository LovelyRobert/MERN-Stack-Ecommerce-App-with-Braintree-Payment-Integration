{"ast":null,"code":"var _jsxFileName = \"/Users/swagath/Desktop/MERN Stack Ecommerce/MERN-Stack-Ecommerce-App-with-Braintree-Payment-Integration/ecommerce-front/src/core/Checkout.js\";\nimport React, { useState, useEffect } from 'react';\nimport Card from './Card';\nimport { Link } from 'react-router-dom';\nimport { getProducts, getBraintreeClientToken } from './cartHelpers';\nimport { isAuthenticated } from '../auth';\n\nconst Checkout = ({\n  products\n}) => {\n  const [data, setData] = useState({\n    loading: false,\n    success: false,\n    clientToken: null,\n    error: '',\n    instance: {},\n    address: ''\n  });\n\n  const userId = isAuthenticated() && isAuthenticated().user._id;\n\n  const token = isAuthenticated() && isAuthenticated().token;\n\n  const getToken = (userId, token) => {\n    getBraintreeClientToken(userId, token).then(data => {\n      if (data.error) {\n        console.log(data.error);\n        setData({ ...data,\n          error: data.error\n        });\n      } else {\n        console.log(data);\n        setData({\n          clientToken: data.clientToken\n        });\n      }\n    });\n  };\n\n  useEffect(() => {\n    getToken(userId, token);\n  }, []);\n\n  const getTotal = () => {\n    return products.reduce((currentValue, nextValue) => {\n      return currentValue + nextValue.count * nextValue.price;\n    }, 0);\n  };\n\n  const showCheckout = () => {\n    return isAuthenticated() ? /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 13\n      }\n    }, \"Checkout\") : /*#__PURE__*/React.createElement(Link, {\n      to: \"/signin\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn btn-primary\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 17\n      }\n    }, \"Sign in to checkout\"));\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 12\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 16\n    }\n  }, \"Total: $\", getTotal(), \" \"), showCheckout());\n};\n\nexport default Checkout;","map":{"version":3,"sources":["/Users/swagath/Desktop/MERN Stack Ecommerce/MERN-Stack-Ecommerce-App-with-Braintree-Payment-Integration/ecommerce-front/src/core/Checkout.js"],"names":["React","useState","useEffect","Card","Link","getProducts","getBraintreeClientToken","isAuthenticated","Checkout","products","data","setData","loading","success","clientToken","error","instance","address","userId","user","_id","token","getToken","then","console","log","getTotal","reduce","currentValue","nextValue","count","price","showCheckout"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,OAAOC,IAAP,MAAiB,QAAjB;AACA,SAASC,IAAT,QAAqB,kBAArB;AACA,SAASC,WAAT,EAAsBC,uBAAtB,QAAqD,eAArD;AACA,SAASC,eAAT,QAAgC,SAAhC;;AAEA,MAAMC,QAAQ,GAAG,CAAC;AAACC,EAAAA;AAAD,CAAD,KAAgB;AAE/B,QAAM,CAACC,IAAD,EAAOC,OAAP,IAAkBV,QAAQ,CAAC;AAC3BW,IAAAA,OAAO,EAAE,KADkB;AAE3BC,IAAAA,OAAO,EAAE,KAFkB;AAG3BC,IAAAA,WAAW,EAAE,IAHc;AAI3BC,IAAAA,KAAK,EAAE,EAJoB;AAK3BC,IAAAA,QAAQ,EAAE,EALiB;AAM3BC,IAAAA,OAAO,EAAE;AANkB,GAAD,CAAhC;;AAUE,QAAMC,MAAM,GAAGX,eAAe,MAAMA,eAAe,GAAGY,IAAlB,CAAuBC,GAA3D;;AACA,QAAMC,KAAK,GAAGd,eAAe,MAAMA,eAAe,GAAGc,KAArD;;AAEA,QAAMC,QAAQ,GAAG,CAACJ,MAAD,EAASG,KAAT,KAAmB;AAChCf,IAAAA,uBAAuB,CAACY,MAAD,EAASG,KAAT,CAAvB,CAAuCE,IAAvC,CAA4Cb,IAAI,IAAI;AAChD,UAAIA,IAAI,CAACK,KAAT,EAAgB;AACZS,QAAAA,OAAO,CAACC,GAAR,CAAYf,IAAI,CAACK,KAAjB;AACAJ,QAAAA,OAAO,CAAC,EAAE,GAAGD,IAAL;AAAWK,UAAAA,KAAK,EAAEL,IAAI,CAACK;AAAvB,SAAD,CAAP;AACH,OAHD,MAGO;AACHS,QAAAA,OAAO,CAACC,GAAR,CAAYf,IAAZ;AACAC,QAAAA,OAAO,CAAC;AAAEG,UAAAA,WAAW,EAAEJ,IAAI,CAACI;AAApB,SAAD,CAAP;AACH;AACJ,KARD;AASH,GAVD;;AAYAZ,EAAAA,SAAS,CAAC,MAAM;AACZoB,IAAAA,QAAQ,CAACJ,MAAD,EAASG,KAAT,CAAR;AACH,GAFQ,EAEN,EAFM,CAAT;;AAKF,QAAMK,QAAQ,GAAG,MAAM;AACrB,WAAOjB,QAAQ,CAACkB,MAAT,CAAgB,CAACC,YAAD,EAAeC,SAAf,KAA6B;AACnD,aAAOD,YAAY,GAAGC,SAAS,CAACC,KAAV,GAAkBD,SAAS,CAACE,KAAlD;AACA,KAFM,EAEL,CAFK,CAAP;AAGD,GAJD;;AAMA,QAAMC,YAAY,GAAG,MAAM;AACrB,WAAOzB,eAAe,kBAClB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADkB,gBAGlB,oBAAC,IAAD;AAAM,MAAA,EAAE,EAAC,SAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AAAQ,MAAA,SAAS,EAAC,iBAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6BADJ,CAHJ;AAOH,GARH;;AAUI,sBAEK;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAAamB,QAAQ,EAArB,MADJ,EAEKM,YAAY,EAFjB,CAFL;AAQL,CAxDD;;AA0DA,eAAexB,QAAf","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport Card from './Card';\nimport { Link } from 'react-router-dom';\nimport { getProducts, getBraintreeClientToken } from './cartHelpers';\nimport { isAuthenticated } from '../auth';\n\nconst Checkout = ({products}) => {\n\n  const [data, setData] = useState({\n        loading: false,\n        success: false,\n        clientToken: null,\n        error: '',\n        instance: {},\n        address: ''\n    });\n\n\n    const userId = isAuthenticated() && isAuthenticated().user._id;\n    const token = isAuthenticated() && isAuthenticated().token;\n\n    const getToken = (userId, token) => {\n        getBraintreeClientToken(userId, token).then(data => {\n            if (data.error) {\n                console.log(data.error);\n                setData({ ...data, error: data.error });\n            } else {\n                console.log(data);\n                setData({ clientToken: data.clientToken });\n            }\n        });\n    };\n\n    useEffect(() => {\n        getToken(userId, token);\n    }, []);\n\n\n\t const getTotal = () => {\n\t \t return products.reduce((currentValue, nextValue) => {\n\t \t \treturn currentValue + nextValue.count * nextValue.price;\n\t \t },0);\n\t }\n\n\t const showCheckout = () => {\n        return isAuthenticated() ? (\n            <div>Checkout</div>\n        ) : (\n            <Link to=\"/signin\">\n                <button className=\"btn btn-primary\">Sign in to checkout</button>\n            </Link>\n        );\n    }\n\n      return (\n           \n           <div>\n               <h2>Total: ${getTotal()} </h2>\n               {showCheckout()}\n           </div>\n      \t)\n \n};\n\nexport default Checkout;\n"]},"metadata":{},"sourceType":"module"}