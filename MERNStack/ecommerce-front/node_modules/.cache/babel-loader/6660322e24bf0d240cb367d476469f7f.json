{"ast":null,"code":"var _jsxFileName = \"/Users/swagath/Desktop/MERN Stack Ecommerce/MERN-Stack-Ecommerce-App-with-Braintree-Payment-Integration/ecommerce-front/src/core/Shop.js\";\nimport React, { useState, useEffect } from 'react';\nimport Layout from './Layout';\nimport Card from './Card';\nimport { getCategories, getFilteredProducts } from \"./apiCore\";\nimport Checkbox from \"./Checkbox\";\nimport RadioBox from \"./RadioBox\";\nimport { prices } from \"./fixedPrices\";\n\nconst Shop = () => {\n  const [myFilters, setMyFilters] = useState({\n    filters: {\n      category: [],\n      price: []\n    }\n  });\n  const [categories, setCategories] = useState([]);\n  const [error, setError] = useState(false);\n  const [limit, setLimit] = useState(6);\n  const [skip, setSkip] = useState(0);\n\n  const init = () => {\n    getCategories().then(data => {\n      if (data.error) {\n        setError(data.error);\n      } else {\n        setCategories(data);\n      }\n    });\n  };\n\n  useEffect(() => {\n    init();\n  }, []);\n\n  const loadFilteredResults = newFilters => {\n    console.log(newFilters); // getFilteredProducts(skip, limit, newFilters).then(data => {\n    //     if (data.error) {\n    //         setError(data.error);\n    //     } else {\n    //         setFilteredResults(data.data);\n    //         setSize(data.size);\n    //         setSkip(0);\n    //     }\n    // });\n  }; //using this function to pass child category id's to parent component\n\n\n  const handleFilters = (filters, filterBy) => {\n    // console.log(\"SHOP\", filters, filterBy);\n    const newFilters = { ...myFilters\n    };\n    newFilters.filters[filterBy] = filters;\n\n    if (filterBy === \"price\") {\n      let priceValues = handlePrice(filters);\n      newFilters.filters[filterBy] = priceValues;\n    }\n\n    loadFilteredResults(myFilters.filters);\n    setMyFilters(newFilters);\n  };\n\n  const handlePrice = value => {\n    const data = prices;\n    let array = [];\n\n    for (let key in data) {\n      if (data[key]._id === parseInt(value)) {\n        array = data[key].array;\n      }\n    }\n\n    return array;\n  };\n\n  return /*#__PURE__*/React.createElement(Layout, {\n    title: \"Shop Page\",\n    description: \"Search and find books of your choice\",\n    className: \"container-fluid\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"h4\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 22\n    }\n  }, \"Filter by categories\"), /*#__PURE__*/React.createElement(\"ul\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Checkbox, {\n    categories: categories,\n    handleFilters: filters => handleFilters(filters, \"category\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 25\n    }\n  })), /*#__PURE__*/React.createElement(\"h4\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 21\n    }\n  }, \"Filter by price range\"), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(RadioBox, {\n    prices: prices,\n    handleFilters: filters => handleFilters(filters, \"price\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 25\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-8\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 17\n    }\n  }, JSON.stringify(myFilters))));\n};\n\nexport default Shop;","map":{"version":3,"sources":["/Users/swagath/Desktop/MERN Stack Ecommerce/MERN-Stack-Ecommerce-App-with-Braintree-Payment-Integration/ecommerce-front/src/core/Shop.js"],"names":["React","useState","useEffect","Layout","Card","getCategories","getFilteredProducts","Checkbox","RadioBox","prices","Shop","myFilters","setMyFilters","filters","category","price","categories","setCategories","error","setError","limit","setLimit","skip","setSkip","init","then","data","loadFilteredResults","newFilters","console","log","handleFilters","filterBy","priceValues","handlePrice","value","array","key","_id","parseInt","JSON","stringify"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport Layout from './Layout';\nimport Card from './Card';\nimport { getCategories, getFilteredProducts } from \"./apiCore\";\nimport Checkbox from \"./Checkbox\";\nimport RadioBox from \"./RadioBox\";\nimport { prices } from \"./fixedPrices\";\n\nconst Shop = () => {\n\n    const [myFilters, setMyFilters] = useState({\n        filters: { category: [], price: [] }\n    });\n    const [categories, setCategories] = useState([]);\n    const [error, setError] = useState(false);\n    const [limit, setLimit] = useState(6);\n    const [skip, setSkip] = useState(0);\n\n    const init = () => {\n        getCategories().then(data => {\n            if (data.error) {\n                setError(data.error);\n            } else {\n                setCategories(data);\n            }\n        });\n    };\n\n\n     useEffect(() => {\n        init();\n\n    }, []);\n\n\n    const loadFilteredResults = newFilters => {\n         console.log(newFilters);\n        // getFilteredProducts(skip, limit, newFilters).then(data => {\n        //     if (data.error) {\n        //         setError(data.error);\n        //     } else {\n        //         setFilteredResults(data.data);\n        //         setSize(data.size);\n        //         setSkip(0);\n        //     }\n        // });\n    }; \n\n    //using this function to pass child category id's to parent component\n     const handleFilters = (filters, filterBy) => {\n         // console.log(\"SHOP\", filters, filterBy);\n        const newFilters = { ...myFilters };\n        newFilters.filters[filterBy] = filters;\n\n        if (filterBy === \"price\") {\n            let priceValues = handlePrice(filters);\n            newFilters.filters[filterBy] = priceValues;\n        }\n        loadFilteredResults(myFilters.filters);\n        setMyFilters(newFilters);\n        \n    };\n\n\n    const handlePrice = value => {\n        const data = prices;\n        let array = [];\n\n        for (let key in data) {\n            if (data[key]._id === parseInt(value)) {\n                array = data[key].array;\n            }\n        }\n        return array;\n    };\n\n\n    return (\n        <Layout\n            title=\"Shop Page\"\n            description=\"Search and find books of your choice\"\n            className=\"container-fluid\"\n        >\n            <div className=\"row\">\n                <div className=\"col-4\">\n                     <h4>Filter by categories</h4>\n                    <ul>\n                        <Checkbox \n                        categories={categories}\n                        handleFilters={filters =>\n                                handleFilters(filters, \"category\")\n                            } />\n                    </ul>  \n\n                    <h4>Filter by price range</h4>\n                    <div>\n                        <RadioBox\n                            prices={prices}\n                            handleFilters={filters =>\n                                handleFilters(filters, \"price\")\n                            }\n                        />\n                    </div>\n\n                </div>\n\n                <div className=\"col-8\">\n                    {JSON.stringify(myFilters)}\n                </div>\n            </div>\n        </Layout>\n    );\n};\n\nexport default Shop;"]},"metadata":{},"sourceType":"module"}